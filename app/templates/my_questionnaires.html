<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>UniQ | Ερωτηματολόγια</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/questionnaires.css') }}">
  <link rel="stylesheet" href="../static/css/home.css">
</head>
<body class="body">

  <nav class="navbar">
     <a class="nav-link" href="{{ url_for('home') }}">🏠 Αρχική</a>
     <a class="nav-link" href="{{ url_for('get_questionnaires') }}">📄 Προβολή Ερωτηματολογίων</a>
    {% if session.username %}
      <span class="nav-user">👤 {{ session.username }}</span>
      <a class="nav-link" href="{{ url_for('logout') }}">🚪 Έξοδος</a>
      <a class="nav-link" href="{{ url_for('change_password') }}">🔑Αλλαγή Κωδικού</a>
      <a class="nav-link" href="{{ url_for('create_questionnaire') }}">🛠️ Κατασκευη Ερωτηματολογίου</a>
      <a class="nav-link" href="{{ url_for('my_questionnaires') }}" >🔍 Προβολή Ερωτηματολογίων Φοιτητή</a>
    {% else %}
      <a class="nav-link" href="{{ url_for('login') }}">🔐 Είσοδος</a>
    {% endif %}
    {% if  session.username and session.role == 'admin'%}
      <a class="nav-link" href="{{ url_for('create_student') }}">➕ Δημιουργία Νέου Φοιτητή</a>
      <a class="nav-link" href="{{ url_for('delete_student') }}">🗑️ Διαγραφή Φοιτητή</a>
    {% endif %}
  </nav>

  <div class="container">
    <h1 class="heading">Τα Ερωτηματολόγια του {{session.username}}</h1>
    <div class="questionnaire-list">
      {% for q in questionnaires %}
        <div class="questionnaire-card">
          <h2 class="questionnaire-title">{{ q.title }}</h2>
          <p>{{ q.description }}</p>
          {% for s in students if s.reg_number == q.student_id %}
            <p><strong>Ονομα:</strong> {{ s.name }}</p>
            <p><strong>Επώνυμο:</strong> {{ s.surname }}</p>
            <p><strong>Τμήμα:</strong> {{ s.department }}</p>
          {% endfor %}
          <p><strong>Απαντήσεις:</strong> {{ q.answer_count }}</p>
          <p><strong>Url:</strong>{{q.unique_url}}</p>

          <a class="view-button" href="{{ url_for('view_questionnaire', questionnaire_id=q.questionnaire_id) }}">Προβολή ➡</a>
          <a class="view-button" href="{{ url_for('edit_questionnaire_title', questionnaire_id=q.questionnaire_id) }}">Αλλαγή Τίτλου ➡</a>
          <a class="view-button" href="{{url_for('delete_questionnaire', questionnaire_id=q.questionnaire_id)}}">Διαγραφη</a>
          <a class="view-button" href="{{url_for('view_answers', questionnaire_id=q.questionnaire_id)}}">Απαντήσεις ➡</a>
        </div>
      {% else %}
        <p>Δεν βρέθηκαν ερωτηματολόγια.</p>
      {% endfor %}
    </div>
  </div>
</body>
</html>



